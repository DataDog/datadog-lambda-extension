START RequestId: 9d2c79a1-ca46-44cd-be26-fcddb536aca1 Version: $LATEST 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Starting daemon to receive messages from runtime... 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Adaptive flush is enabled 2021-06-18 16:19:34 UTC | SAGENT | WARN | Error loading config: open /var/task/datadog.yaml: no such file or directory 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Enabling logs collection HTTP route 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Logs collection route has been initialized. Logs must be sent to http://sandbox:8124/lambda/logs 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Subscribing to Logs for types: [platform function extension] LOGS Name: datadog-agent State: Subscribed Types: [platform,function,extension] 2021-06-18 16:19:34 UTC | SAGENT | INFO | Checking HTTP connectivity... 2021-06-18 16:19:34 UTC | SAGENT | INFO | Sending HTTP connectivity request to http://127.0.0.1:3333/v1/input... 2021-06-18 16:19:34 UTC | SAGENT | INFO | HTTP connectivity successful 2021-06-18 16:19:34 UTC | SAGENT | INFO | Starting a serverless logs-agent... 2021-06-18 16:19:34 UTC | SAGENT | INFO | logs-agent started 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Adding AWS Logs collection source 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Using a SyncForwarder with a 20s timeout 2021-06-18 16:19:34 UTC | SAGENT | INFO | Retry queue storage on disk is disabled 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | 'telemetry.dogstatsd.aggregator_channel_latency_buckets' is empty, falling back to default values 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | 'telemetry.dogstatsd.listeners_latency_buckets' is empty, falling back to default values 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | 'telemetry.dogstatsd.listeners_channel_latency_buckets' is empty, falling back to default values 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | dogstatsd-udp: 127.0.0.1:8125 successfully initialized 2021-06-18 16:19:34 UTC | SAGENT | INFO | dogstatsd-udp: starting to listen on 127.0.0.1:8125 2021-06-18 16:19:34 UTC | SAGENT | WARN | Error loading config: open /var/task/datadog.yaml: no such file or directory 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Trace writer initialized (climit=200 qsize=78) 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Stats writer initialized (climit=20 qsize=83) 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Did not restore current state from file 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | serverless agent ready in 13.16812ms 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Waiting for next invocation... 2021-06-18 16:19:34 UTC | SAGENT | INFO | Listening for traces at http://localhost:8126 2021-06-18 16:19:34 UTC | SAGENT | DEBUG | Starting concentrator 2021-06-18 16:19:35 UTC | SAGENT | DEBUG | Hit on the serverless.Hello route. 2021-06-18 12:19:35.648 (-04:00) [DEBUG] 2021-06-18T16:19:35.648Z2021-06-18 12:19:35.648 (-04:00) [DEBUG] 2021-06-18T16:19:35.648Z2021-06-18 12:19:36.002 (-04:00) [DEBUG] 2021-06-18T16:19:36.002Z2021-06-18 12:19:36.700 (-04:00) [DEBUG] 2021-06-18T16:19:36.7Z2021-06-18 12:19:36.410 (-04:00) [DEBUG] 2021-06-18T16:19:36.41ZEXTENSION Name: datadog-agent State: Ready Events: [INVOKE,SHUTDOWN] EXTENSION Name: recorder-extension State: Ready Events: [SHUTDOWN] 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Received invocation event... 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Client library registered with extension 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | The flush strategy end has decided to not flush in the moment: starting 2021-06-18 12:19:36.460 (-04:00) 9d2c79a1-ca46-44cd-be26-fcddb536aca1 [DEBUG] [dd.trace_id=0 dd.span_id=0] Not submitting enhanced metric invocations because enhanced metrics are disabled 2021-06-18 12:19:36.460 (-04:00) 9d2c79a1-ca46-44cd-be26-fcddb536aca1 [DEBUG] [dd.trace_id=0 dd.span_id=0] Converted trace context {'trace-id': '6745906946225467553', 'parent-id': '9549229630277347931', 'sampling-priority': '2'} from X-Ray segment ('1-60ccc796-3ae418315d9e46a0519bf0a1', '8485adc13750ea5b', True) 2021-06-18 12:19:36.460 (-04:00) 9d2c79a1-ca46-44cd-be26-fcddb536aca1 [DEBUG] [dd.trace_id=0 dd.span_id=0] extracted dd trace context {'trace-id': '6745906946225467553', 'parent-id': '9549229630277347931', 'sampling-priority': '2'} 2021-06-18 12:19:36.470 (-04:00) 9d2c79a1-ca46-44cd-be26-fcddb536aca1 [DEBUG] [dd.trace_id=16670522858255940534 dd.span_id=14094459230557960918] datadog_lambda_wrapper _before() done HTTP POST http://127.0.0.1:8124/lambda/flush Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "Content-Length:0", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:9021299188916379437", "x-datadog-sampling-priority:1", "x-datadog-trace-id:16670522858255940534"] Data: {} 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Hit on the serverless.Flush route. 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | The flush strategy end has decided to flush in moment: stopping 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Received a Flush trigger 2021-06-18 16:19:36 UTC | SAGENT | INFO | Triggering a flush in the logs-agent 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Flush in the logs-agent done. 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Flushing 2 series to the forwarder 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | The payload was not too big, returning the full payload 2021-06-18 16:19:36 UTC | SAGENT | INFO | Successfully posted payload to "http://127.0.0.1:3333/api/v1/series?api_key=NO_NEED_TO_BE_VALID", the agent will only log transaction success every 500 transactions 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | SyncForwarder has flushed 1 transactions 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Flushing 1 service checks to the forwarder 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | The payload was not too big, returning the full payload 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | SyncForwarder has flushed 1 transactions 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Flush done 2021-06-18 16:19:36 UTC | SAGENT | DEBUG | Waiting for next invocation... 2021-06-18 12:19:36.154 (-04:00) 9d2c79a1-ca46-44cd-be26-fcddb536aca1 [DEBUG] [dd.trace_id=0 dd.span_id=0] datadog_lambda_wrapper _after() done END RequestId: 9d2c79a1-ca46-44cd-be26-fcddb536aca1 REPORT RequestId: 9d2c79a1-ca46-44cd-be26-fcddb536aca1 Duration: 112.27 ms Billed Duration: 113 ms Memory Size: 1024 MB Max Memory Used: 142 MB Init Duration: 1384.39 ms XRAY TraceId: 1-60ccc796-3ae418315d9e46a0519bf0a1 SegmentId: 74b44371609ee0cb Sampled: true START RequestId: c15710e1-653d-4fd8-ba30-7416b876c4eb Version: $LATEST 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Enhanced metrics: {DurationMs:112.27 BilledDurationMs:113 MemorySizeMB:1024 MaxMemoryUsedMB:142 InitDurationMs:1384.39} 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Received invocation event... 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | The flush strategy end has decided to not flush in the moment: starting 2021-06-18 12:19:39.494 (-04:00) c15710e1-653d-4fd8-ba30-7416b876c4eb [DEBUG] [dd.trace_id=0 dd.span_id=0] Not submitting enhanced metric invocations because enhanced metrics are disabled 2021-06-18 12:19:39.494 (-04:00) c15710e1-653d-4fd8-ba30-7416b876c4eb [DEBUG] [dd.trace_id=0 dd.span_id=0] Converted trace context {'trace-id': '6089881422909650189', 'parent-id': '3502765161313143469', 'sampling-priority': '2'} from X-Ray segment ('1-60ccc79b-204deeda54839ae378c7b50d', '309c525b13af0aad', True) 2021-06-18 12:19:39.494 (-04:00) c15710e1-653d-4fd8-ba30-7416b876c4eb [DEBUG] [dd.trace_id=0 dd.span_id=0] extracted dd trace context {'trace-id': '6089881422909650189', 'parent-id': '3502765161313143469', 'sampling-priority': '2'} 2021-06-18 12:19:39.495 (-04:00) c15710e1-653d-4fd8-ba30-7416b876c4eb [DEBUG] [dd.trace_id=8470213365536610508 dd.span_id=12591182170203492585] datadog_lambda_wrapper _before() done HTTP POST http://127.0.0.1:8124/lambda/flush Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "Content-Length:0", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:1627805498483094952", "x-datadog-sampling-priority:1", "x-datadog-trace-id:8470213365536610508"] Data: {} 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Hit on the serverless.Flush route. 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | The flush strategy end has decided to flush in moment: stopping 2021-06-18 16:19:39 UTC | SAGENT | INFO | Triggering a flush in the logs-agent 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Flush in the logs-agent done. 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Received a Flush trigger 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Flushing 2 series to the forwarder 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | The payload was not too big, returning the full payload 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Serializing 1 traces and 0 APM events. 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | SyncForwarder has flushed 1 transactions 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Flushing 1 service checks to the forwarder 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | The payload was not too big, returning the full payload [trace] {"traceID":16670522858255940534,"spans":[{"service":"aws.lambda","name":"aws.lambda","resource":"integration-tests-extension-41160740-simple-trace-python","trace_id":16670522858255940534,"span_id":14094459230557960918,"parent_id":0,"start":1624033176047079616,"duration":105164881,"error":0,"meta":{"_dd.compute_stats":"1","_dd.origin":"lambda","account_id":"601427279990","aws_account":"601427279990","cold_start":"true","datadog_lambda":"3.38.0","dd_trace":"0.48.0","function_arn":"arn:aws:lambda:sa-east-1:601427279990:function:integration-tests-extension-41160740-simple-trace-python","function_version":"$LATEST","functionname":"integration-tests-extension-41160740-simple-trace-python","region":"sa-east-1","request_id":"9d2c79a1-ca46-44cd-be26-fcddb536aca1","resource_names":"integration-tests-extension-41160740-simple-trace-python","runtime-id":"b3dbb37755c24b17a1b1190855ebb963","tagA":"valueA","tagB":"valueB","taga":"valuea","tagb":"valueb","tagc":"valuec","tagd":"valued"},"metrics":{"_dd.agent_psr":1,"_dd.tracer_kr":1,"_sampling_priority_v1":1,"_top_level":1,"system.pid":24},"type":"serverless"},{"service":"aws.lambda","name":"integration_test","resource":"integration-test","trace_id":16670522858255940534,"span_id":11413437022627975734,"parent_id":14094459230557960918,"start":1624033176047332240,"duration":100179620,"error":0,"meta":{"_dd.compute_stats":"1","_dd.origin":"lambda","account_id":"601427279990","aws_account":"601427279990","function_arn":"arn:aws:lambda:sa-east-1:601427279990:function:integration-tests-extension-41160740-simple-trace-python","functionname":"integration-tests-extension-41160740-simple-trace-python","region":"sa-east-1","tagA":"valueA","tagB":"valueB","taga":"valuea","tagb":"valueb","tagc":"valuec","tagd":"valued"},"metrics":null,"type":""},{"service":"aws.lambda","name":"requests.request","resource":"requests.request","trace_id":16670522858255940534,"span_id":9021299188916379437,"parent_id":14094459230557960918,"start":1624033176149089606,"duration":3031829,"error":0,"meta":{"_dd.compute_stats":"1","_dd.origin":"lambda","account_id":"601427279990","aws_account":"601427279990","function_arn":"arn:aws:lambda:sa-east-1:601427279990:function:integration-tests-extension-41160740-simple-trace-python","functionname":"integration-tests-extension-41160740-simple-trace-python","http.method":"POST","http.status_code":"200","http.url":"http://127.0.0.1:8124/lambda/flush","region":"sa-east-1","tagA":"valueA","tagB":"valueB","taga":"valuea","tagb":"valueb","tagc":"valuec","tagd":"valued"},"metrics":{"_dd.measured":1},"type":"http"}],"startTime":1624033176047079616,"endTime":1624033176152244497} 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | SyncForwarder has flushed 1 transactions 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Flushed traces to the API; time: 1.424441ms, bytes: 879 2021-06-18 12:19:39.602 (-04:00) c15710e1-653d-4fd8-ba30-7416b876c4eb [DEBUG] [dd.trace_id=0 dd.span_id=0] datadog_lambda_wrapper _after() done 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Flush done 2021-06-18 16:19:39 UTC | SAGENT | DEBUG | Waiting for next invocation... END RequestId: c15710e1-653d-4fd8-ba30-7416b876c4eb REPORT RequestId: c15710e1-653d-4fd8-ba30-7416b876c4eb Duration: 117.86 ms Billed Duration: 118 ms Memory Size: 1024 MB Max Memory Used: 150 MB XRAY TraceId: 1-60ccc79b-204deeda54839ae378c7b50d SegmentId: 1e8dcc8566c98817 Sampled: true
